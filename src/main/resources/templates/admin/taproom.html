
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head><meta charset="UTF-8"/><title>Taproom Admin</title><link rel="stylesheet" th:href="@{/css/app.css}"/></head>
<body>
<header>
  <h1>Taproom Admin</h1>
  <div class="badge" style="display:inline-block;margin-left:0.5rem;padding:0.15rem 0.4rem;border-radius:6px;background:#eef3ff;color:#2a4b8d;font-size:0.85rem;vertical-align:middle;">
    <span th:if="${lastEvent != null}">
      Last event: <strong th:text="${lastEvent.type}">TAP</strong>
      <span th:text="'@ ' + ${lastEvent.atTime}">@ time</span>
    </span>
    <span th:if="${lastEvent == null}">No events yet</span>
  </div>
</header>
<main>
  <p><a href="/taplist">Go to Taplist</a></p>
  <p><a class="btn" th:href="@{|/admin/venue/${venue.id}/events|}">View Events</a></p>
  <h2>Your Taps</h2>
  <ul>
    <li th:each="t : ${taps}">
      Tap #<span th:text="${t.number}">1</span>
      <span th:if="${t.keg != null}"> — <span th:text="${t.keg.beer.name}">Beer</span> (<span th:text="${t.keg.fillPercent}">100</span>%)</span>
      <span th:if="${t.keg == null}"><em>Empty</em></span>
    </li>
  </ul>
  <h2>Available Kegs (Received)</h2>
  <ul>
    <li th:each="k : ${kegs}">
      <span th:text="${k.serialNumber}">SER-001</span>: <span th:text="${k.beer.name}">Beer</span> — <span th:text="${k.size}">HALF_BARREL</span> — <span th:text="${k.fillPercent}">100</span>%
    </li>
  </ul>

  <h2>Inbound Kegs (Awaiting Receipt)</h2>
  <ul>
    <li th:each="k : ${inboundKegs}">
      <span th:text="${k.serialNumber}">SER-002</span>: <span th:text="${k.beer.name}">Beer</span> — <span th:text="${k.size}">HALF_BARREL</span>
      <form method="post" th:action="@{'/admin/taproom/kegs/' + ${k.id} + '/receive'}" class="inline" style="margin-left:0.5rem;">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
        <button class="btn" type="submit">Receive</button>
      </form>
    </li>
  </ul>
</main>
<div th:replace="fragments/footer :: footer"></div>
</body></html>
